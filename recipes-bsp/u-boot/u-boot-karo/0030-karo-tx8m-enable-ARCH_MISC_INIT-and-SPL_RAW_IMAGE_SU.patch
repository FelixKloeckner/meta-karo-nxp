From f81a17fc0ce741ad1bcffa179dc2ff3bd9fdd181 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Lothar=20Wa=C3=9Fmann?= <LW@KARO-electronics.de>
Date: Tue, 26 Nov 2019 09:22:01 +0100
Subject: [PATCH 30/39] karo: tx8m: enable ARCH_MISC_INIT and
 SPL_RAW_IMAGE_SUPPORT

---
 configs/tx8m-1610_defconfig       | 4 +++-
 configs/tx8m-1610_mfg_defconfig   | 3 ++-
 configs/tx8m-1610_noenv_defconfig | 4 +++-
 3 files changed, 8 insertions(+), 3 deletions(-)

diff --git a/configs/tx8m-1610_defconfig b/configs/tx8m-1610_defconfig
index 904970f..2255f60 100644
--- a/configs/tx8m-1610_defconfig
+++ b/configs/tx8m-1610_defconfig
@@ -12,6 +12,7 @@ CONFIG_SPL_DRIVERS_MISC_SUPPORT=y
 CONFIG_SPL_WATCHDOG_SUPPORT=y
 CONFIG_IMX_BOOTAUX=y
 CONFIG_DEFAULT_DEVICE_TREE="imx8mm-tx8m-1610"
+CONFIG_ENV_VARS_UBOOT_CONFIG=y
 CONFIG_FIT=y
 CONFIG_SPL_LOAD_FIT=y
 CONFIG_OF_BOARD_SETUP=y
@@ -26,8 +27,10 @@ CONFIG_PRE_CON_BUF_ADDR=0x93F000
 CONFIG_SYS_CONSOLE_INFO_QUIET=y
 CONFIG_DEFAULT_FDT_FILE="imx8mm-tx8m-1610-mipi-mb.dtb"
 CONFIG_VERSION_VARIABLE=y
+CONFIG_ARCH_MISC_INIT=y
 CONFIG_SPL=y
 CONFIG_SPL_BOARD_INIT=y
+CONFIG_SPL_RAW_IMAGE_SUPPORT=y
 CONFIG_SPL_DISABLE_BANNER_PRINT=y
 CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_USE_SECTOR=y
 CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_SECTOR=0x300
@@ -65,7 +68,6 @@ CONFIG_PARTITION_TYPE_GUID=y
 CONFIG_OF_CONTROL=y
 CONFIG_OF_BOARD_FIXUP=y
 CONFIG_ENV_IS_IN_MMC=y
-CONFIG_ENV_VARS_UBOOT_CONFIG=y
 CONFIG_BOOTP_DNS=y
 CONFIG_BOOTP_GATEWAY=y
 CONFIG_BOOTP_SUBNETMASK=y
diff --git a/configs/tx8m-1610_mfg_defconfig b/configs/tx8m-1610_mfg_defconfig
index a759545..871a3e7 100644
--- a/configs/tx8m-1610_mfg_defconfig
+++ b/configs/tx8m-1610_mfg_defconfig
@@ -13,6 +13,7 @@ CONFIG_SPL_DRIVERS_MISC_SUPPORT=y
 CONFIG_SPL_WATCHDOG_SUPPORT=y
 CONFIG_IMX_BOOTAUX=y
 CONFIG_DEFAULT_DEVICE_TREE="imx8mm-tx8m-1610"
+CONFIG_ENV_VARS_UBOOT_CONFIG=y
 # CONFIG_ANDROID_BOOT_IMAGE is not set
 CONFIG_FIT=y
 CONFIG_SPL_LOAD_FIT=y
@@ -30,6 +31,7 @@ CONFIG_DEFAULT_FDT_FILE="imx8mm-tx8m-1610.dtb"
 CONFIG_VERSION_VARIABLE=y
 CONFIG_SPL=y
 CONFIG_SPL_BOARD_INIT=y
+CONFIG_SPL_RAW_IMAGE_SUPPORT=y
 CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_USE_SECTOR=y
 CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_SECTOR=0x300
 CONFIG_SPL_I2C_SUPPORT=y
@@ -73,7 +75,6 @@ CONFIG_PARTITION_TYPE_GUID=y
 CONFIG_OF_CONTROL=y
 CONFIG_OF_BOARD_FIXUP=y
 CONFIG_ENV_IS_IN_MMC=y
-CONFIG_ENV_VARS_UBOOT_CONFIG=y
 CONFIG_BOOTP_DNS=y
 CONFIG_BOOTP_GATEWAY=y
 CONFIG_BOOTP_SUBNETMASK=y
diff --git a/configs/tx8m-1610_noenv_defconfig b/configs/tx8m-1610_noenv_defconfig
index 79c8992..aa5fb3a 100644
--- a/configs/tx8m-1610_noenv_defconfig
+++ b/configs/tx8m-1610_noenv_defconfig
@@ -13,6 +13,7 @@ CONFIG_SPL_DRIVERS_MISC_SUPPORT=y
 CONFIG_SPL_WATCHDOG_SUPPORT=y
 CONFIG_IMX_BOOTAUX=y
 CONFIG_DEFAULT_DEVICE_TREE="imx8mm-tx8m-1610"
+CONFIG_ENV_VARS_UBOOT_CONFIG=y
 CONFIG_FIT=y
 CONFIG_SPL_LOAD_FIT=y
 CONFIG_OF_BOARD_SETUP=y
@@ -27,8 +28,10 @@ CONFIG_PRE_CON_BUF_ADDR=0x93F000
 CONFIG_SYS_CONSOLE_INFO_QUIET=y
 CONFIG_DEFAULT_FDT_FILE="imx8mm-tx8m-1610.dtb"
 CONFIG_VERSION_VARIABLE=y
+CONFIG_ARCH_MISC_INIT=y
 CONFIG_SPL=y
 CONFIG_SPL_BOARD_INIT=y
+CONFIG_SPL_RAW_IMAGE_SUPPORT=y
 CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_USE_SECTOR=y
 CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_SECTOR=0x300
 CONFIG_SPL_I2C_SUPPORT=y
@@ -64,7 +67,6 @@ CONFIG_PARTITION_TYPE_GUID=y
 CONFIG_OF_CONTROL=y
 CONFIG_OF_BOARD_FIXUP=y
 CONFIG_ENV_IS_IN_MMC=y
-CONFIG_ENV_VARS_UBOOT_CONFIG=y
 CONFIG_BOOTP_DNS=y
 CONFIG_BOOTP_GATEWAY=y
 CONFIG_BOOTP_SUBNETMASK=y
-- 
2.7.4

