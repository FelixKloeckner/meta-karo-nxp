From 7f0aec5d05a023aaddb1cb94fa25e349138cd9e2 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Lothar=20Wa=C3=9Fmann?= <LW@KARO-electronics.de>
Date: Wed, 10 Jul 2019 12:44:23 +0200
Subject: [PATCH] Revert "MLK-11117-01 ARM: clk: imx6: adjust axi clock to
 264MHz on imx6ul"
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This reverts commit 05607a38a7f11136bd70a40aa0fe81868861747f which was
duplicating already existing code omitting a bugfix for that code.

Signed-off-by: Lothar Wa√ümann <LW@KARO-electronics.de>
---
 drivers/clk/imx/clk-imx6ul.c | 11 -----------
 1 file changed, 11 deletions(-)

diff --git a/drivers/clk/imx/clk-imx6ul.c b/drivers/clk/imx/clk-imx6ul.c
index 4f614c5c57c9..286707b36c65 100644
--- a/drivers/clk/imx/clk-imx6ul.c
+++ b/drivers/clk/imx/clk-imx6ul.c
@@ -508,17 +508,6 @@ static void __init imx6ul_clocks_init(struct device_node *ccm_node)
 		clk_set_parent(clks[IMX6ULL_CLK_EPDC_PRE_SEL], clks[IMX6UL_CLK_PLL3_PFD2]);

 	clk_set_parent(clks[IMX6UL_CLK_ENFC_SEL], clks[IMX6UL_CLK_PLL2_PFD2]);
-
-	/* Lower the AHB clock rate before changing the clock source. */
-	imx_clk_set_rate(clks[IMX6UL_CLK_AHB], 99000000);
-
-	/* Change periph_pre clock to pll2_bus to adjust AXI rate to 264MHz */
-	imx_clk_set_parent(clks[IMX6UL_CLK_PERIPH_CLK2_SEL], clks[IMX6UL_CLK_PLL3_USB_OTG]);
-	imx_clk_set_parent(clks[IMX6UL_CLK_PERIPH], clks[IMX6UL_CLK_PERIPH_CLK2]);
-	imx_clk_set_parent(clks[IMX6UL_CLK_PERIPH_PRE], clks[IMX6UL_CLK_PLL2_BUS]);
-	imx_clk_set_parent(clks[IMX6UL_CLK_PERIPH], clks[IMX6UL_CLK_PERIPH_PRE]);
-
-	imx_clk_set_rate(clks[IMX6UL_CLK_AHB], 132000000);
 }

 CLK_OF_DECLARE(imx6ul, "fsl,imx6ul-ccm", imx6ul_clocks_init);
--
2.11.0
